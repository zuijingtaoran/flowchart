!function(n,a){"function"==typeof define&&define.amd?define(function(){return a(n,n.document)}):"object"==typeof exports?module.exports=n.document?a(n,n.document):function(e){return a(e,e.document)}:n.SVG=a(n,n.document)}("undefined"==typeof window?this:window,function(E,_){function T(a,t,e,i){return e+i.replace(w.regex.dots," .")}function X(n){for(var t=n.slice(0),e=t.length;e--;)Array.isArray(t[e])&&(t[e]=X(t[e]));return t}function e(n,t){return n instanceof t}function n(n,t){return(n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector).call(n,t)}function i(e){return e.toLowerCase().replace(/-(.)/g,function(n,t){return t.toUpperCase()})}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return 4==e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function t(n){var t=n.toString(16);return 1==t.length?"0"+t:t}function o(a,t,r){if(null==t||null==r){var o=a.bbox();null==t?t=o.width/o.height*r:null==r&&(r=o.height/o.width*t)}return{width:t,height:r}}function s(n,t,e){return{x:t*n.a+e*n.c+0,y:t*n.b+e*n.d+0}}function l(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function u(e){return e instanceof w.Matrix||(e=new w.Matrix(e)),e}function d(n,t){n.cx=null==n.cx?t.bbox().cx:n.cx,n.cy=null==n.cy?t.bbox().cy:n.cy}function c(a){for(var t=0,r=a.length,i="";t<r;t++)i+=a[t][0],null!=a[t][1]&&(i+=a[t][1],null!=a[t][2]&&(i+=" ",i+=a[t][2],null!=a[t][3]&&(i+=" ",i+=a[t][3],i+=" ",i+=a[t][4],null!=a[t][5]&&(i+=" ",i+=a[t][5],i+=" ",i+=a[t][6],null!=a[t][7]&&(i+=" ",i+=a[t][7])))));return i+" "}function p(t){for(var e=t.childNodes.length-1;0<=e;e--)t.childNodes[e]instanceof E.SVGElement&&p(t.childNodes[e]);return w.adopt(t).id(w.eid(t.nodeName))}function h(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function m(n){var t=(n||"").toString().match(w.regex.reference);if(t)return t[1]}function f(e){return 1e-37<Math.abs(e)?e:0}var x=Math.min,g=Math.max,y=Math.sin,v=Math.cos,B=Math.PI,j=void 0===this?E:this,w=j.SVG=function(e){if(w.supported)return e=new w.Doc(e),w.parser.draw||w.prepare(),e};if(w.ns="http://www.w3.org/2000/svg",w.xmlns="http://www.w3.org/2000/xmlns/",w.xlink="http://www.w3.org/1999/xlink",w.svgjs="http://svgjs.com/svgjs",w.supported=function(){return!!_.createElementNS&&!!_.createElementNS(w.ns,"svg").createSVGRect}(),!w.supported)return!1;w.did=1e3,w.eid=function(e){return"Svgjs"+r(e)+w.did++},w.create=function(e){var t=_.createElementNS(this.ns,e);return t.setAttribute("id",this.eid(e)),t},w.extend=function(){var a,r,o,s;for(a=[].slice.call(arguments),r=a.pop(),s=a.length-1;0<=s;s--)if(a[s])for(o in r)a[s].prototype[o]=r[o];w.Set&&w.Set.inherit&&w.Set.inherit()},w.invent=function(n){var t="function"==typeof n.create?n.create:function(){this.constructor.call(this,w.create(n.create))};return n.inherit&&(t.prototype=new n.inherit),n.extend&&w.extend(t,n.extend),n.construct&&w.extend(n.parent||w.Container,n.construct),t},w.adopt=function(t){if(!t)return null;if(t.instance)return t.instance;var e;return e="svg"==t.nodeName?t.parentNode instanceof E.SVGElement?new w.Nested:new w.Doc:"linearGradient"==t.nodeName?new w.Gradient("linear"):"radialGradient"==t.nodeName?new w.Gradient("radial"):w[r(t.nodeName)]?new w[r(t.nodeName)]:new w.Element(t),e.type=t.nodeName,e.node=t,t.instance=e,e instanceof w.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e},w.prepare=function(){var e=_.getElementsByTagName("body")[0],t=(e?new w.Doc(e):w.adopt(_.documentElement).nested()).size(2,0);w.parser={body:e||_.documentElement,draw:t.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:t.polyline().node,path:t.path().node,native:w.create("svg")}},w.parser={native:w.create("svg")},_.addEventListener("DOMContentLoaded",function(){w.parser.draw||w.prepare()},!1),w.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},w.utils={map:function(a,t){var e,o=a.length,n=[];for(e=0;e<o;e++)n.push(t(a[e]));return n},filter:function(a,t){var e,o=a.length,n=[];for(e=0;e<o;e++)t(a[e])&&n.push(a[e]);return n},radians:function(e){return e%360*B/180},degrees:function(e){return 180*e/B%360},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof E.SVGElement})}},w.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},w.Color=function(n){var t;this.r=0,this.g=0,this.b=0,n&&("string"==typeof n?w.regex.isRgb.test(n)?(t=w.regex.rgb.exec(n.replace(w.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):w.regex.isHex.test(n)&&(t=w.regex.hex.exec(a(n)),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"==typeof n&&(this.r=n.r,this.g=n.g,this.b=n.b))},w.extend(w.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+t(this.r)+t(this.g)+t(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return .3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)},morph:function(e){return this.destination=new w.Color(e),this},at:function(e){return this.destination?(e=0>e?0:1<e?1:e,new w.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),w.Color.test=function(e){return e+="",w.regex.isHex.test(e)||w.regex.isRgb.test(e)},w.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},w.Color.isColor=function(e){return w.Color.isRgb(e)||w.Color.test(e)},w.Array=function(n,a){n=(n||[]).valueOf(),0==n.length&&a&&(n=a.valueOf()),this.value=this.parse(n)},w.extend(w.Array,{morph:function(n){if(this.destination=this.parse(n),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],e=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(e);for(;this.value.length<this.destination.length;)this.value.push(t)}return this},settle:function(){for(var n=0,a=this.value.length,e=[];n<a;n++)-1==e.indexOf(this.value[n])&&e.push(this.value[n]);return this.value=e},at:function(a){if(!this.destination)return this;for(var t=0,r=this.value.length,i=[];t<r;t++)i.push(this.value[t]+(this.destination[t]-this.value[t])*a);return new w.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)},split:function(e){return e.trim().split(w.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var e=new this.constructor;return e.value=X(this.value),e}}),w.PointArray=function(n,t){w.Array.call(this,n,t||[[0,0]])},w.PointArray.prototype=new w.Array,w.PointArray.prototype.constructor=w.PointArray,w.extend(w.PointArray,{toString:function(){for(var n=0,a=this.value.length,e=[];n<a;n++)e.push(this.value[n].join(","));return e.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var t=0,r=this.value.length,i=[];t<r;t++)i.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*a,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*a]);return new w.PointArray(i)},parse:function(a){var r=[];if(a=a.valueOf(),Array.isArray(a)){if(Array.isArray(a[0]))return a.map(function(e){return e.slice()});if(null!=a[0].x)return a.map(function(e){return[e.x,e.y]})}else a=a.trim().split(w.regex.delimiter).map(parseFloat);0!=a.length%2&&a.pop();for(var e=0,o=a.length;e<o;e+=2)r.push([a[e],a[e+1]]);return r},move:function(a,r){var o=this.bbox();if(a-=o.x,r-=o.y,!isNaN(a)&&!isNaN(r))for(var i=this.value.length-1;0<=i;i--)this.value[i]=[this.value[i][0]+a,this.value[i][1]+r];return this},size:function(a,t){var e,r=this.bbox();for(e=this.value.length-1;0<=e;e--)r.width&&(this.value[e][0]=(this.value[e][0]-r.x)*a/r.width+r.x),r.height&&(this.value[e][1]=(this.value[e][1]-r.y)*t/r.height+r.y);return this},bbox:function(){return w.parser.poly.setAttribute("points",this.toString()),w.parser.poly.getBBox()}});for(var b={M:function(n,t,e){return t.x=e.x=n[0],t.y=e.y=n[1],["M",t.x,t.y]},L:function(n,t){return t.x=n[0],t.y=n[1],["L",n[0],n[1]]},H:function(n,t){return t.x=n[0],["H",n[0]]},V:function(n,t){return t.y=n[0],["V",n[0]]},C:function(n,t){return t.x=n[4],t.y=n[5],["C",n[0],n[1],n[2],n[3],n[4],n[5]]},S:function(n,t){return t.x=n[2],t.y=n[3],["S",n[0],n[1],n[2],n[3]]},Q:function(n,t){return t.x=n[2],t.y=n[3],["Q",n[0],n[1],n[2],n[3]]},T:function(n,t){return t.x=n[0],t.y=n[1],["T",n[0],n[1]]},Z:function(n,t,e){return t.x=e.x,t.y=e.y,["Z"]},A:function(n,t){return t.x=n[5],t.y=n[6],["A",n[0],n[1],n[2],n[3],n[4],n[5],n[6]]}},C=["m","l","h","v","q","t","c","s","a","z"],N=0,F=C.length;N<F;++N)b[C[N]]=function(a){return function(t,e,i){if("H"==a)t[0]+=e.x;else if("V"==a)t[0]+=e.y;else if("A"==a)t[5]+=e.x,t[6]+=e.y;else for(var n=0,o=t.length;n<o;++n)t[n]+=n%2?e.y:e.x;return b[a](t,e,i)}}(C[N].toUpperCase());w.PathArray=function(n,t){w.Array.call(this,n,t||[["M",0,0]])},w.PathArray.prototype=new w.Array,w.PathArray.prototype.constructor=w.PathArray,w.extend(w.PathArray,{toString:function(){return c(this.value)},move:function(a,o){var s=this.bbox();if(a-=s.x,o-=s.y,!isNaN(a)&&!isNaN(o))for(var i,d=this.value.length-1;0<=d;d--)i=this.value[d][0],"M"==i||"L"==i||"T"==i?(this.value[d][1]+=a,this.value[d][2]+=o):"H"==i?this.value[d][1]+=a:"V"==i?this.value[d][1]+=o:"C"==i||"S"==i||"Q"==i?(this.value[d][1]+=a,this.value[d][2]+=o,this.value[d][3]+=a,this.value[d][4]+=o,"C"==i&&(this.value[d][5]+=a,this.value[d][6]+=o)):"A"==i&&(this.value[d][6]+=a,this.value[d][7]+=o);return this},size:function(a,t){var e,o,s=this.bbox();for(e=this.value.length-1;0<=e;e--)o=this.value[e][0],"M"==o||"L"==o||"T"==o?(this.value[e][1]=(this.value[e][1]-s.x)*a/s.width+s.x,this.value[e][2]=(this.value[e][2]-s.y)*t/s.height+s.y):"H"==o?this.value[e][1]=(this.value[e][1]-s.x)*a/s.width+s.x:"V"==o?this.value[e][1]=(this.value[e][1]-s.y)*t/s.height+s.y:"C"==o||"S"==o||"Q"==o?(this.value[e][1]=(this.value[e][1]-s.x)*a/s.width+s.x,this.value[e][2]=(this.value[e][2]-s.y)*t/s.height+s.y,this.value[e][3]=(this.value[e][3]-s.x)*a/s.width+s.x,this.value[e][4]=(this.value[e][4]-s.y)*t/s.height+s.y,"C"==o&&(this.value[e][5]=(this.value[e][5]-s.x)*a/s.width+s.x,this.value[e][6]=(this.value[e][6]-s.y)*t/s.height+s.y)):"A"==o&&(this.value[e][1]=this.value[e][1]*a/s.width,this.value[e][2]=this.value[e][2]*t/s.height,this.value[e][6]=(this.value[e][6]-s.x)*a/s.width+s.x,this.value[e][7]=(this.value[e][7]-s.y)*t/s.height+s.y);return this},equalCommands:function(a){var r,o,s;for(a=new w.PathArray(a),s=this.value.length===a.value.length,r=0,o=this.value.length;s&&r<o;r++)s=this.value[r][0]===a.value[r][0];return s},morph:function(e){return e=new w.PathArray(e),this.destination=this.equalCommands(e)?e:null,this},at:function(d){if(!this.destination)return this;var t,l,u,c,p=this.value,s=this.destination.value,o=[],a=new w.PathArray;for(t=0,l=p.length;t<l;t++){for(o[t]=[p[t][0]],u=1,c=p[t].length;u<c;u++)o[t][u]=p[t][u]+(s[t][u]-p[t][u])*d;"A"===o[t][0]&&(o[t][4]=+(0!=o[t][4]),o[t][5]=+(0!=o[t][5]))}return a.value=o,a},parse:function(i){if(i instanceof w.PathArray)return i.valueOf();var r,d;i="string"==typeof i?i.replace(w.regex.numbersWithDots,T).replace(w.regex.pathLetters," $& ").replace(w.regex.hyphen,"$1 -").trim().split(w.regex.delimiter):i.reduce(function(n,t){return[].concat.call(n,t)},[]);var d=[],l=new w.Point,s=new w.Point,o=0,u=i.length;do w.regex.isPathLetter.test(i[o])?(r=i[o],++o):"M"==r?r="L":"m"==r&&(r="l"),d.push(b[r].call(null,i.slice(o,o+={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0}[r.toUpperCase()]).map(parseFloat),l,s));while(u>o);return d},bbox:function(){return w.parser.path.setAttribute("d",this.toString()),w.parser.path.getBBox()}}),w.Number=w.invent({create:function(n,t){this.value=0,this.unit=t||"","number"==typeof n?this.value=isNaN(n)?0:isFinite(n)?n:0>n?-34e37:34e37:"string"==typeof n?(t=n.match(w.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):n instanceof w.Number&&(this.value=n.valueOf(),this.unit=n.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new w.Number(e),new w.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new w.Number(e),new w.Number(this-e,this.unit||e.unit)},times:function(e){return e=new w.Number(e),new w.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new w.Number(e),new w.Number(this/e,this.unit||e.unit)},to:function(n){var t=new w.Number(this);return"string"==typeof n&&(t.unit=n),t},morph:function(e){return this.destination=new w.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new w.Number(this.destination).minus(this).times(e).plus(this):this}}}),w.Element=w.invent({create:function(e){this._stroke=w.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._events=e._events||{},this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(n,t){return this.x(n).y(t)},center:function(n,t){return this.cx(n).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(n,t){var e=o(this,n,t);return this.width(new w.Number(e.width)).height(new w.Number(e.height))},clone:function(n){this.writeDataToDom();var t=p(this.node.cloneNode(!0));return n?n.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},inside:function(n,t){var e=this.bbox();return n>e.x&&t>e.y&&n<e.x+e.width&&t<e.y+e.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(w.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(n){if(!this.hasClass(n)){var t=this.classes();t.push(n),this.attr("class",t.join(" "))}return this},removeClass:function(n){return this.hasClass(n)&&this.attr("class",this.classes().filter(function(t){return t!=n}).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return w.get(this.attr(e))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=w.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof E.SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"==e.node.parentNode.nodeName||"#document-fragment"==e.node.parentNode.nodeName)return null;e=w.adopt(e.node.parentNode)}},doc:function(){return this instanceof w.Doc?this:this.parent(w.Doc)},parents:function(n){var t=[],e=this;do{if(!(e=e.parent(n))||!e.node)break;t.push(e)}while(e.parent);return t},matches:function(e){return n(this.node,e)},native:function(){return this.node},svg:function(e){var a=_.createElement("svg");if(!(e&&this instanceof w.Parent))return a.appendChild(e=_.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),a.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");a.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,o=a.firstChild.childNodes.length;i<o;i++)this.node.appendChild(a.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(n){return e(this,n)}}}),w.easing={"-":function(e){return e},"<>":function(e){return-v(e*B)/2+.5},">":function(e){return y(e*B/2)},"<":function(e){return 1-v(e*B/2)}},w.morph=function(n){return function(t,e){return new w.MorphObj(t,e).at(n)}},w.Situation=w.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new w.Number(e.duration).valueOf(),this.delay=new w.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),w.FX=w.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(a,r,o){"object"==typeof a&&(r=a.ease,o=a.delay,a=a.duration);var s=new w.Situation({duration:a||1e3,delay:o||0,ease:w.easing[r||"-"]||r});return this.queue(s),this},delay:function(n){var t=new w.Situation({duration:n,delay:0,ease:w.easing["-"]});return this.queue(t)},target:function(e){return e&&e instanceof w.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=E.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){E.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof w.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof w.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var a,r,o,s=this.situation;if(s.init)return this;for(a in s.animations)for(o=this.target()[a](),Array.isArray(o)||(o=[o]),Array.isArray(s.animations[a])||(s.animations[a]=[s.animations[a]]),r=o.length;r--;)s.animations[a][r]instanceof w.Number&&(o[r]=new w.Number(o[r])),s.animations[a][r]=o[r].morph(s.animations[a][r]);for(a in s.attrs)s.attrs[a]=new w.MorphObj(this.target().attr(a),s.attrs[a]);for(a in s.styles)s.styles[a]=new w.MorphObj(this.target().style(a),s.styles[a]);return s.initialTransformation=this.target().matrixify(),s.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(n,t){var e=this.active;return this.active=!1,t&&this.clearQueue(),n&&this.situation&&(!e&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var e=this.situation;this.stop(),this.situation=e,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(n,t){var e=this.situation.duration/this._speed;return this.absPos=n,t||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*e,this.situation.finish=this.situation.start+e,this.step(!0)},speed:function(e){return 0===e?this.pause():e?(this._speed=e,this.at(this.absPos,!0)):this._speed},loop:function(n,t){var e=this.last();return e.loops=null==n||n,e.loop=0,t&&(e.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(n){var t=this.last();return t.reversed=void 0===n?!t.reversed:n,this},progress:function(e){return e?this.situation.ease(this.pos):this.pos},after:function(a){var t=this.last();return this.target().on("finished.fx",function e(i){i.detail.situation==t&&(a.call(this,t),this.off("finished.fx",e))}),this._callStart()},during:function(n){var t=this.last(),e=function(e){e.detail.situation==t&&n.call(this,e.detail.pos,w.morph(e.detail.pos),e.detail.eased,t)};return this.target().off("during.fx",e).on("during.fx",e),this.after(function(){this.off("during.fx",e)}),this._callStart()},afterAll:function(n){var t=function t(){n.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},duringAll:function(n){var t=function(t){n.call(this,t.detail.pos,w.morph(t.detail.pos),t.detail.eased,t.detail.situation)};return this.target().off("during.fx",t).on("during.fx",t),this.afterAll(function(){this.off("during.fx",t)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(n,t,e){return this.last()[e||"animations"][n]=t,this._callStart()},step:function(a){if(a||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops){var t,o,d;t=g(this.absPos,0),o=Math.floor(t),!0===this.situation.loops||o<this.situation.loops?(this.pos=t-o,d=this.situation.loop,this.situation.loop=o):(this.absPos=this.situation.loops,this.pos=1,d=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-d)%2))}else this.absPos=x(this.absPos,1),this.pos=this.absPos;0>this.pos&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var l=this.situation.ease(this.pos);for(var r in this.situation.once)r>this.lastPos&&r<=l&&(this.situation.once[r].call(this.target(),this.pos,l),delete this.situation.once[r]);return this.active&&this.target().fire("during",{pos:this.pos,eased:l,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=l,this):this},eachAt:function(){var a,d,l,u=this,n=this.target(),r=this.situation;for(a in r.animations)l=[].concat(r.animations[a]).map(function(e){return"string"!=typeof e&&e.at?e.at(r.ease(u.pos),u.pos):e}),n[a].apply(n,l);for(a in r.attrs)l=[a].concat(r.attrs[a]).map(function(e){return"string"!=typeof e&&e.at?e.at(r.ease(u.pos),u.pos):e}),n.attr.apply(n,l);for(a in r.styles)l=[a].concat(r.styles[a]).map(function(e){return"string"!=typeof e&&e.at?e.at(r.ease(u.pos),u.pos):e}),n.style.apply(n,l);if(r.transforms.length){for(l=r.initialTransformation,a=0,d=r.transforms.length;a<d;a++){var s=r.transforms[a];s instanceof w.Matrix?l=s.relative?l.multiply(new w.Matrix().morph(s).at(r.ease(this.pos))):l.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(l.extract()),l=l.multiply(s.at(r.ease(this.pos))))}n.matrix(l)}return this},once:function(a,r,e){var i=this.last();return e||(a=i.ease(a)),i.once[a]=r,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:w.Element,construct:{animate:function(n,t,e){return(this.fx||(this.fx=new w.FX(this))).animate(n,t,e)},delay:function(e){return(this.fx||(this.fx=new w.FX(this))).delay(e)},stop:function(n,t){return this.fx&&this.fx.stop(n,t),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(e){if(this.fx){if(null==e)return this.fx.speed();this.fx.speed(e)}return this}}}),w.MorphObj=w.invent({create:function(n,t){return w.Color.isColor(t)?new w.Color(n).morph(t):w.regex.delimiter.test(n)?w.regex.pathLetters.test(n)?new w.PathArray(n).morph(t):new w.Array(n).morph(t):w.regex.numberAndUnit.test(t)?new w.Number(n).morph(t):(this.value=n,void(this.destination=t))},extend:{at:function(n,t){return 1>t?this.value:this.destination},valueOf:function(){return this.value}}}),w.extend(w.FX,{attr:function(a,t){if("object"==typeof a)for(var e in a)this.attr(e,a[e]);else this.add(a,t,"attrs");return this},style:function(n,t){if("object"==typeof n)for(var e in n)this.style(e,n[e]);else this.add(n,t,"styles");return this},x:function(n,t){if(this.target()instanceof w.G)return this.transform({x:n},t),this;var e=new w.Number(n);return e.relative=t,this.add("x",e)},y:function(n,t){if(this.target()instanceof w.G)return this.transform({y:n},t),this;var e=new w.Number(n);return e.relative=t,this.add("y",e)},cx:function(e){return this.add("cx",new w.Number(e))},cy:function(e){return this.add("cy",new w.Number(e))},move:function(n,t){return this.x(n).y(t)},center:function(n,t){return this.cx(n).cy(t)},size:function(n,a){if(this.target()instanceof w.Text)this.attr("font-size",n);else{var r;n&&a||(r=this.target().bbox()),n||(n=r.width/r.height*a),a||(a=r.height/r.width*n),this.add("width",new w.Number(n)).add("height",new w.Number(a))}return this},width:function(e){return this.add("width",new w.Number(e))},height:function(e){return this.add("height",new w.Number(e))},plot:function(a,t,e,i){return 4==arguments.length?this.plot([a,t,e,i]):this.add("plot",new(this.target().morphArray)(a))},leading:function(e){return this.target().leading?this.add("leading",new w.Number(e)):this},viewbox:function(a,t,e,i){return this.target()instanceof w.Container&&this.add("viewbox",new w.ViewBox(a,t,e,i)),this},update:function(e){if(this.target()instanceof w.Stop){if("number"==typeof e||e instanceof w.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",e.offset)}return this}}),w.Box=w.invent({create:function(a,t,e,i){return"object"!=typeof a||a instanceof w.Element?void(4==arguments.length&&(this.x=a,this.y=t,this.width=e,this.height=i),h(this)):w.Box.call(this,null==a.left?a.x:a.left,null==a.top?a.y:a.top,a.width,a.height)},extend:{merge:function(n){var t=new this.constructor;return t.x=x(this.x,n.x),t.y=x(this.y,n.y),t.width=g(this.x+this.width,n.x+n.width)-t.x,t.height=g(this.y+this.height,n.y+n.height)-t.y,h(t)},transform:function(a){var t,o=1/0,d=-1/0,l=1/0,u=-1/0;return[new w.Point(this.x,this.y),new w.Point(this.x2,this.y),new w.Point(this.x,this.y2),new w.Point(this.x2,this.y2)].forEach(function(t){t=t.transform(a),o=x(o,t.x),d=g(d,t.x),l=x(l,t.y),u=g(u,t.y)}),t=new this.constructor,t.x=o,t.width=d-o,t.y=l,t.height=u-l,h(t),t}}}),w.BBox=w.invent({create:function(a){if(w.Box.apply(this,[].slice.call(arguments)),a instanceof w.Element){var t;try{if(!_.documentElement.contains){for(var e=a.node;e.parentNode;)e=e.parentNode;if(e!=_)throw new Exception("Element not in the dom")}else if(!_.documentElement.contains(a.node))throw new Exception("Element not in the dom");t=a.node.getBBox()}catch(n){if(a instanceof w.Shape){var o=a.clone(w.parser.draw.instance).show();t=o.node.getBBox(),o.remove()}else t={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}w.Box.call(this,t)}},inherit:w.Box,parent:w.Element,construct:{bbox:function(){return new w.BBox(this)}}}),w.BBox.prototype.constructor=w.BBox,w.extend(w.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),w.RBox=w.invent({create:function(e){w.Box.apply(this,[].slice.call(arguments)),e instanceof w.Element&&w.Box.call(this,e.node.getBoundingClientRect())},inherit:w.Box,parent:w.Element,extend:{addOffset:function(){return this.x+=E.pageXOffset,this.y+=E.pageYOffset,this}},construct:{rbox:function(e){return e?new w.RBox(this).transform(e.screenCTM().inverse()):new w.RBox(this).addOffset()}}}),w.RBox.prototype.constructor=w.RBox,w.Matrix=w.invent({create:function(n){var a,r=l([1,0,0,1,0,0]);for(n=n instanceof w.Element?n.matrixify():"string"==typeof n?l(n.split(w.regex.delimiter).map(parseFloat)):6==arguments.length?l([].slice.call(arguments)):Array.isArray(n)?l(n):"object"==typeof n?n:r,a=M.length-1;0<=a;--a)this[M[a]]=null==n[M[a]]?r[M[a]]:n[M[a]]},extend:{extract:function(){var n=Math.sqrt,a=Math.atan2,r=s(this,0,1),t=s(this,1,0),e=180/B*a(r.y,r.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*v(e*B/180)+this.f*y(e*B/180))/n(this.a*this.a+this.b*this.b),transformedY:(this.f*v(e*B/180)+this.e*y(-e*B/180))/n(this.c*this.c+this.d*this.d),skewX:-e,skewY:180/B*a(t.y,t.x),scaleX:n(this.a*this.a+this.b*this.b),scaleY:n(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new w.Matrix(this)}},clone:function(){return new w.Matrix(this)},morph:function(e){return this.destination=new w.Matrix(e),this},at:function(e){return this.destination?new w.Matrix({a:this.a+(this.destination.a-this.a)*e,b:this.b+(this.destination.b-this.b)*e,c:this.c+(this.destination.c-this.c)*e,d:this.d+(this.destination.d-this.d)*e,e:this.e+(this.destination.e-this.e)*e,f:this.f+(this.destination.f-this.f)*e}):this},multiply:function(e){return new w.Matrix(this.native().multiply(u(e).native()))},inverse:function(){return new w.Matrix(this.native().inverse())},translate:function(n,t){return new w.Matrix(this.native().translate(n||0,t||0))},scale:function(a,t,r,o){return 1==arguments.length?t=a:3==arguments.length&&(o=r,r=t,t=a),this.around(r,o,new w.Matrix(a,0,0,t,0,0))},rotate:function(n,a,e){return n=w.utils.radians(n),this.around(a,e,new w.Matrix(v(n),y(n),-y(n),v(n),0,0))},flip:function(n,t){return"x"==n?this.scale(-1,1,t,0):"y"==n?this.scale(1,-1,0,t):this.scale(-1,-1,n,null==t?n:t)},skew:function(a,r,o,s){var d=Math.tan;return 1==arguments.length?r=a:3==arguments.length&&(s=o,o=r,r=a),a=w.utils.radians(a),r=w.utils.radians(r),this.around(o,s,new w.Matrix(1,d(r),d(a),1,0,0))},skewX:function(n,t,e){return this.skew(n,0,t,e)},skewY:function(n,t,e){return this.skew(0,n,t,e)},around:function(n,t,e){return this.multiply(new w.Matrix(1,0,0,1,n||0,t||0)).multiply(e).multiply(new w.Matrix(1,0,0,1,-n||0,-t||0))},native:function(){for(var n=w.parser.native.createSVGMatrix(),t=M.length-1;0<=t;t--)n[M[t]]=this[M[t]];return n},toString:function(){return"matrix("+f(this.a)+","+f(this.b)+","+f(this.c)+","+f(this.d)+","+f(this.e)+","+f(this.f)+")"}},parent:w.Element,construct:{ctm:function(){return new w.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof w.Nested){var n=this.rect(1,1),t=n.node.getScreenCTM();return n.remove(),new w.Matrix(t)}return new w.Matrix(this.node.getScreenCTM())}}}),w.Point=w.invent({create:function(n,t){var e;e=Array.isArray(n)?{x:n[0],y:n[1]}:"object"==typeof n?{x:n.x,y:n.y}:null==n?{x:0,y:0}:{x:n,y:null==t?n:t},this.x=e.x,this.y=e.y},extend:{clone:function(){return new w.Point(this)},morph:function(n,t){return this.destination=new w.Point(n,t),this},at:function(e){return this.destination?new w.Point({x:this.x+(this.destination.x-this.x)*e,y:this.y+(this.destination.y-this.y)*e}):this},native:function(){var e=w.parser.native.createSVGPoint();return e.x=this.x,e.y=this.y,e},transform:function(e){return new w.Point(this.native().matrixTransform(e.native()))}}}),w.extend(w.Element,{point:function(n,t){return new w.Point(n,t).transform(this.screenCTM().inverse())}}),w.extend(w.Element,{attr:function(n,a,r){if(null==n){for(n={},a=this.node.attributes,r=a.length-1;0<=r;r--)n[a[r].nodeName]=w.regex.isNumber.test(a[r].nodeValue)?parseFloat(a[r].nodeValue):a[r].nodeValue;return n}if("object"==typeof n)for(a in n)this.attr(a,n[a]);else if(null===a)this.node.removeAttribute(n);else{if(null==a)return a=(e=>{let t="";if("id"===n)t=e;else return e;if(t.includes("SVGid")){var a=t.replace("SVGid","").split("#");t=atob(a[0])+(a[1]?"#"+a[1]:"")}return t})(this.node.getAttribute(n)),null==a?w.defaults.attrs[n]:w.regex.isNumber.test(a)?parseFloat(a):a;"stroke-width"==n?this.attr("stroke",0<parseFloat(a)?this._stroke:null):"stroke"==n&&(this._stroke=a),"fill"!=n&&"stroke"!=n||(w.regex.isImage.test(a)&&(a=this.doc().defs().image(a,0,0)),a instanceof w.Image&&(a=this.doc().defs().pattern(0,0,function(){this.add(a)}))),"number"==typeof a?a=new w.Number(a):w.Color.isColor(a)?a=new w.Color(a):Array.isArray(a)&&(a=new w.Array(a)),"leading"==n?this.leading&&this.leading(a):"string"==typeof r?this.node.setAttributeNS(r,n,((e,t)=>{let n;return"id"==t&&(e=""+e,n=[,,].fill(e).concat(e.match(/(.{1,12})(#\w{1})$/)),e=`SVGid${btoa(n.slice(-2,-1))}${n.slice(-1)}`),e})(a,n)):this.node.setAttribute(n,((e,t)=>{let n;return"id"==t&&(e=""+e,n=[,,].fill(e).concat(e.match(/(.{1,12})(#\w{1})$/)),e=`SVGid${btoa(n.slice(-2,-1))}${n.slice(-1)}`),e})(a,n)),this.rebuild&&("font-size"==n||"x"==n)&&this.rebuild(n,a)}return this}}),w.extend(w.Element,{transform:function(a,t){var o,l,u=this;if("object"!=typeof a)return o=new w.Matrix(u).extract(),"string"==typeof a?o[a]:o;if(o=new w.Matrix(u),t=!!t||!!a.relative,null!=a.a)o=t?o.multiply(new w.Matrix(a)):new w.Matrix(a);else if(null!=a.rotation)d(a,u),o=t?o.rotate(a.rotation,a.cx,a.cy):o.rotate(a.rotation-o.extract().rotation,a.cx,a.cy);else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(d(a,u),a.scaleX=null==a.scale?null==a.scaleX?1:a.scaleX:a.scale,a.scaleY=null==a.scale?null==a.scaleY?1:a.scaleY:a.scale,!t){var r=o.extract();a.scaleX=1*a.scaleX/r.scaleX,a.scaleY=1*a.scaleY/r.scaleY}o=o.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else if(null!=a.skew||null!=a.skewX||null!=a.skewY){if(d(a,u),a.skewX=null==a.skew?null==a.skewX?0:a.skewX:a.skew,a.skewY=null==a.skew?null==a.skewY?0:a.skewY:a.skew,!t){var r=o.extract();o=o.multiply(new w.Matrix().skew(r.skewX,r.skewY,a.cx,a.cy).inverse())}o=o.skew(a.skewX,a.skewY,a.cx,a.cy)}else a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?u.bbox()["c"+a.flip]:a.offset:null==a.offset?(l=u.bbox(),a.flip=l.cx,a.offset=l.cy):a.flip=a.offset,o=new w.Matrix().flip(a.flip,a.offset)):null==a.x&&null==a.y||(t?o=o.translate(a.x,a.y):(null!=a.x&&(o.e=a.x),null!=a.y&&(o.f=a.y)));return this.attr("transform",o)}}),w.extend(w.FX,{transform:function(a,t){var o,s,l=this.target();return"object"==typeof a?(t=!!t||!!a.relative,null==a.a?null==a.rotation?null!=a.scale||null!=a.scaleX||null!=a.scaleY?(d(a,l),a.scaleX=null==a.scale?null==a.scaleX?1:a.scaleX:a.scale,a.scaleY=null==a.scale?null==a.scaleY?1:a.scaleY:a.scale,o=new w.Scale(a.scaleX,a.scaleY,a.cx,a.cy)):null!=a.skewX||null!=a.skewY?(d(a,l),a.skewX=null==a.skewX?0:a.skewX,a.skewY=null==a.skewY?0:a.skewY,o=new w.Skew(a.skewX,a.skewY,a.cx,a.cy)):a.flip?("x"==a.flip||"y"==a.flip?a.offset=null==a.offset?l.bbox()["c"+a.flip]:a.offset:null==a.offset?(s=l.bbox(),a.flip=s.cx,a.offset=s.cy):a.flip=a.offset,o=new w.Matrix().flip(a.flip,a.offset)):null==a.x&&null==a.y||(o=new w.Translate(a.x,a.y)):(d(a,l),o=new w.Rotate(a.rotation,a.cx,a.cy)):o=new w.Matrix(a),o?(o.relative=t,this.last().transforms.push(o),this._callStart()):this):(o=new w.Matrix(l).extract(),"string"==typeof a?o[a]:o)}}),w.extend(w.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(w.regex.transforms).slice(0,-1).map(function(n){var t=n.trim().split("(");return[t[0],t[1].split(w.regex.delimiter).map(function(e){return parseFloat(e)})]}).reduce(function(n,t){return"matrix"==t[0]?n.multiply(l(t[1])):n[t[0]].apply(n,t[1])},new w.Matrix)},toParent:function(n){if(this==n)return this;var t=this.screenCTM(),e=n.screenCTM().inverse();return this.addTo(n).untransform().transform(e.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),w.Transformation=w.invent({create:function(a,t){if(1<arguments.length&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(a))for(var e=0,r=this.arguments.length;e<r;++e)this[this.arguments[e]]=a[e];else if("object"==typeof a)for(var e=0,r=this.arguments.length;e<r;++e)this[this.arguments[e]]=a[this.arguments[e]];this.inversed=!1,!0===t&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(a){for(var t=[],e=0,o=this.arguments.length;e<o;++e)t.push(this[this.arguments[e]]);var n=this._undo||new w.Matrix;return n=new w.Matrix().morph(w.Matrix.prototype[this.method].apply(n,t)).at(a),this.inversed?n.inverse():n},undo:function(n){for(var t=0,a=this.arguments.length;t<a;++t)n[this.arguments[t]]=void 0===this[this.arguments[t]]?0:n[this.arguments[t]];return n.cx=this.cx,n.cy=this.cy,this._undo=new w[r(this.method)](n,!0).at(1),this}}}),w.Translate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),w.Rotate=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(n){var t=new w.Matrix().rotate(new w.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(n),this.cx,this.cy);return this.inversed?t.inverse():t},undo:function(e){return this._undo=e,this}}}),w.Scale=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),w.Skew=w.invent({parent:w.Matrix,inherit:w.Transformation,create:function(){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),w.extend(w.Element,{style:function(n,a){if(0==arguments.length)return this.node.style.cssText||"";if(!(2>arguments.length))this.node.style[i(n)]=null===a||w.regex.isBlank.test(a)?"":a;else if("object"==typeof n)for(a in n)this.style(a,n[a]);else{if(!w.regex.isCss.test(n))return this.node.style[i(n)];for(n=n.split(/\s*;\s*/).filter(function(e){return!!e}).map(function(e){return e.split(/\s*:\s*/)});a=n.pop();)this.style(a[0],a[1])}return this}}),w.Parent=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Element,extend:{children:function(){return w.utils.map(w.utils.filterSVGElements(this.node.childNodes),function(e){return w.adopt(e)})},add:function(n,t){return null==t?this.node.appendChild(n.node):n.node!=this.node.childNodes[t]&&this.node.insertBefore(n.node,this.node.childNodes[t]),this},put:function(n,t){return this.add(n,t),n},has:function(e){return 0<=this.index(e)},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return w.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(a,t){var e,o,s=this.children();for(e=0,o=s.length;e<o;e++)s[e]instanceof w.Element&&a.apply(s[e],[e,s]),t&&s[e]instanceof w.Container&&s[e].each(a,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),w.extend(w.Parent,{ungroup:function(n,a){return 0===a||this instanceof w.Defs||this.node==w.parser.draw?this:(n=n||(this instanceof w.Doc?this:this.parent(w.Parent)),a=a||1/0,this.each(function(){return this instanceof w.Defs?this:this instanceof w.Parent?this.ungroup(n,a-1):this.toParent(n)}),this.node.firstChild||this.remove(),this)},flatten:function(n,t){return this.ungroup(n,t)}}),w.Container=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Parent}),w.ViewBox=w.invent({create:function(d){var p,h,m,f,x,g,y,v=1,b=1,C=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(d instanceof w.Element){for(g=d,y=d,x=(d.attr("viewBox")||"").match(C),d.bbox,m=new w.Number(d.width()),f=new w.Number(d.height());"%"==m.unit;)v*=m.value,m=new w.Number(g instanceof w.Doc?g.parent().offsetWidth:g.parent().width()),g=g.parent();for(;"%"==f.unit;)b*=f.value,f=new w.Number(y instanceof w.Doc?y.parent().offsetHeight:y.parent().height()),y=y.parent();this.x=0,this.y=0,this.width=m*v,this.height=f*b,this.zoom=1,x&&(p=parseFloat(x[0]),h=parseFloat(x[1]),m=parseFloat(x[2]),f=parseFloat(x[3]),this.zoom=this.width/this.height>m/f?this.height/f:this.width/m,this.x=p,this.y=h,this.width=m,this.height=f)}else d="string"==typeof d?d.match(C).map(function(e){return parseFloat(e)}):Array.isArray(d)?d:"object"==typeof d?[d.x,d.y,d.width,d.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=d[0],this.y=d[1],this.width=d[2],this.height=d[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(a,t,e,i){return this.destination=new w.ViewBox(a,t,e,i),this},at:function(e){return this.destination?new w.ViewBox([this.x+(this.destination.x-this.x)*e,this.y+(this.destination.y-this.y)*e,this.width+(this.destination.width-this.width)*e,this.height+(this.destination.height-this.height)*e]):this}},parent:w.Container,construct:{viewbox:function(a,t,e,i){return 0==arguments.length?new w.ViewBox(this):this.attr("viewBox",new w.ViewBox(a,t,e,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(n){w.Element.prototype[n]=function(t){return null==t?w.off(this,n):w.on(this,n,t),this}}),w.listenerId=0,w.on=function(d,t,l,e,i){var r=l.bind(e||d),s=d instanceof w.Element?d.node:d;s.instance=s.instance||{_events:{}};var o=s.instance._events;l._svgjsListenerId||(l._svgjsListenerId=++w.listenerId),t.split(w.regex.delimiter).forEach(function(a){var t=a.split(".")[0],e=a.split(".")[1]||"*";o[t]=o[t]||{},o[t][e]=o[t][e]||{},o[t][e][l._svgjsListenerId]=r,s.addEventListener(t,r,i||!1)})},w.off=function(a,t,d,l){var n=a instanceof w.Element?a.node:a;if(n.instance&&("function"!=typeof d||(d=d._svgjsListenerId))){var r=n.instance._events;(t||"").split(w.regex.delimiter).forEach(function(i){var s,u,c=i&&i.split(".")[0],a=i&&i.split(".")[1];if(d)r[c]&&r[c][a||"*"]&&(n.removeEventListener(c,r[c][a||"*"][d],l||!1),delete r[c][a||"*"][d]);else if(c&&a){if(r[c]&&r[c][a]){for(u in r[c][a])w.off(n,[c,a].join("."),u);delete r[c][a]}}else if(a)for(i in r)for(s in r[i])a===s&&w.off(n,[i,a].join("."));else if(!c){for(i in r)w.off(n,i);n.instance._events={}}else if(r[c]){for(s in r[c])w.off(n,[c,s].join("."));delete r[c]}})}},w.extend(w.Element,{on:function(a,t,e,i){return w.on(this,a,t,e,i),this},off:function(n,t){return w.off(this.node,n,t),this},fire:function(t,n){return t instanceof E.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new E.CustomEvent(t,{detail:n,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),w.Defs=w.invent({create:"defs",inherit:w.Container}),w.G=w.invent({create:"g",inherit:w.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)},y:function(e){return null==e?this.transform("y"):this.transform({y:e-this.y()},!0)},cx:function(e){return null==e?this.gbox().cx:this.x(e-this.gbox().width/2)},cy:function(e){return null==e?this.gbox().cy:this.y(e-this.gbox().height/2)},gbox:function(){var n=this.bbox(),t=this.transform();return n.x+=t.x,n.x2+=t.x,n.cx+=t.x,n.y+=t.y,n.y2+=t.y,n.cy+=t.y,n}},construct:{group:function(){return this.put(new w.G)}}}),w.Doc=w.invent({create:function(e){e&&(e="string"==typeof e?_.getElementById(e):e,"svg"==e.nodeName?this.constructor.call(this,e):(this.constructor.call(this,w.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:w.Container,extend:{namespace:function(){return this.attr({xmlns:w.ns,version:"1.1"}).attr("xmlns:xlink",w.xlink,w.xmlns).attr("xmlns:svgjs",w.svgjs,w.xmlns)},defs:function(){if(!this._defs){var e;this._defs=(e=this.node.getElementsByTagName("defs")[0])?w.adopt(e):new w.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var e=this.node.getScreenCTM();return e&&this.style("left",-e.e%1+"px").style("top",-e.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,w.parser.draw.parentNode||this.node.appendChild(w.parser.draw),this},clone:function(n){this.writeDataToDom();var t=this.node,e=p(t.cloneNode(!0));return n?(n.node||n).appendChild(e.node):t.parentNode.insertBefore(e.node,t.nextSibling),e}}}),w.extend(w.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var n=this.position()+1,t=this.parent();return t.removeElement(this).add(this,n),t instanceof w.Doc&&t.node.appendChild(t.defs().node),this},backward:function(){var e=this.position();return 0<e&&this.parent().removeElement(this).add(this,e-1),this},front:function(){var e=this.parent();return e.node.appendChild(this.node),e instanceof w.Doc&&e.node.appendChild(e.defs().node),this},back:function(){return 0<this.position()&&this.parent().removeElement(this).add(this,0),this},before:function(n){n.remove();var t=this.position();return this.parent().add(n,t),this},after:function(n){n.remove();var t=this.position();return this.parent().add(n,t+1),this}}),w.Mask=w.invent({create:function(){this.constructor.call(this,w.create("mask")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var e=this.targets.length-1;0<=e;e--)this.targets[e]&&this.targets[e].unmask();return this.targets=[],w.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new w.Mask)}}}),w.extend(w.Element,{maskWith:function(e){return this.masker=e instanceof w.Mask?e:this.parent().mask().add(e),this.masker.targets.push(this),this.attr("mask","url(\"#"+this.masker.attr("id")+"\")")},unmask:function(){return delete this.masker,this.attr("mask",null)}}),w.ClipPath=w.invent({create:function(){this.constructor.call(this,w.create("clipPath")),this.targets=[]},inherit:w.Container,extend:{remove:function(){for(var e=this.targets.length-1;0<=e;e--)this.targets[e]&&this.targets[e].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new w.ClipPath)}}}),w.extend(w.Element,{clipWith:function(e){return this.clipper=e instanceof w.ClipPath?e:this.parent().clip().add(e),this.clipper.targets.push(this),this.attr("clip-path","url(\"#"+this.clipper.attr("id")+"\")")},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),w.Gradient=w.invent({create:function(e){this.constructor.call(this,w.create(e+"Gradient")),this.type=e},inherit:w.Container,extend:{at:function(n,t,e){return this.put(new w.Stop).update(n,t,e)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(n,a,e){return"transform"==n&&(n="gradientTransform"),w.Container.prototype.attr.call(this,n,a,e)}},construct:{gradient:function(n,t){return this.defs().gradient(n,t)}}}),w.extend(w.Gradient,w.FX,{from:function(n,t){return"radial"==(this._target||this).type?this.attr({fx:new w.Number(n),fy:new w.Number(t)}):this.attr({x1:new w.Number(n),y1:new w.Number(t)})},to:function(n,t){return"radial"==(this._target||this).type?this.attr({cx:new w.Number(n),cy:new w.Number(t)}):this.attr({x2:new w.Number(n),y2:new w.Number(t)})}}),w.extend(w.Defs,{gradient:function(n,t){return this.put(new w.Gradient(n)).update(t)}}),w.Stop=w.invent({create:"stop",inherit:w.Element,extend:{update:function(e){return("number"==typeof e||e instanceof w.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new w.Number(e.offset)),this}}}),w.Pattern=w.invent({create:"pattern",inherit:w.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(n,a,e){return"transform"==n&&(n="patternTransform"),w.Container.prototype.attr.call(this,n,a,e)}},construct:{pattern:function(n,t,e){return this.defs().pattern(n,t,e)}}}),w.extend(w.Defs,{pattern:function(n,t,e){return this.put(new w.Pattern).update(e).attr({x:0,y:0,width:n,height:t,patternUnits:"userSpaceOnUse"})}}),w.Shape=w.invent({create:function(e){this.constructor.call(this,e)},inherit:w.Element}),w.Bare=w.invent({create:function(n,t){if(this.constructor.call(this,w.create(n)),t)for(var e in t.prototype)"function"==typeof t.prototype[e]&&(this[e]=t.prototype[e])},inherit:w.Element,extend:{words:function(e){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(_.createTextNode(e)),this}}}),w.extend(w.Parent,{element:function(n,t){return this.put(new w.Bare(n,t))}}),w.Symbol=w.invent({create:"symbol",inherit:w.Container,construct:{symbol:function(){return this.put(new w.Symbol)}}}),w.Use=w.invent({create:"use",inherit:w.Shape,extend:{element:function(n,t){return this.attr("href",(t||"")+"#"+n,w.xlink)}},construct:{use:function(n,t){return this.put(new w.Use).element(n,t)}}}),w.Rect=w.invent({create:"rect",inherit:w.Shape,construct:{rect:function(n,t){return this.put(new w.Rect).size(n,t)}}}),w.Circle=w.invent({create:"circle",inherit:w.Shape,construct:{circle:function(e){return this.put(new w.Circle).rx(new w.Number(e).divide(2)).move(0,0)}}}),w.extend(w.Circle,w.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),w.Ellipse=w.invent({create:"ellipse",inherit:w.Shape,construct:{ellipse:function(n,t){return this.put(new w.Ellipse).size(n,t).move(0,0)}}}),w.extend(w.Ellipse,w.Rect,w.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),w.extend(w.Circle,w.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new w.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new w.Number(e).divide(2))},size:function(n,t){var e=o(this,n,t);return this.rx(new w.Number(e.width).divide(2)).ry(new w.Number(e.height).divide(2))}}),w.Line=w.invent({create:"line",inherit:w.Shape,extend:{array:function(){return new w.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,r,e,i){return null==a?this.array():(a=void 0===r?new w.PointArray(a).toLine():{x1:a,y1:r,x2:e,y2:i},this.attr(a))},move:function(n,t){return this.attr(this.array().move(n,t).toLine())},size:function(n,t){var e=o(this,n,t);return this.attr(this.array().size(e.width,e.height).toLine())}},construct:{line:function(a,t,e,i){return w.Line.prototype.plot.apply(this.put(new w.Line),null==a?[0,0,0,0]:[a,t,e,i])}}}),w.Polyline=w.invent({create:"polyline",inherit:w.Shape,construct:{polyline:function(e){return this.put(new w.Polyline).plot(e||new w.PointArray)}}}),w.Polygon=w.invent({create:"polygon",inherit:w.Shape,construct:{polygon:function(e){return this.put(new w.Polygon).plot(e||new w.PointArray)}}}),w.extend(w.Polyline,w.Polygon,{array:function(){return this._array||(this._array=new w.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new w.PointArray(e))},clear:function(){return delete this._array,this},move:function(n,t){return this.attr("points",this.array().move(n,t))},size:function(n,t){var e=o(this,n,t);return this.attr("points",this.array().size(e.width,e.height))}}),w.extend(w.Line,w.Polyline,w.Polygon,{morphArray:w.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(n){var t=this.bbox();return null==n?t.width:this.size(n,t.height)},height:function(n){var t=this.bbox();return null==n?t.height:this.size(t.width,n)}}),w.Path=w.invent({create:"path",inherit:w.Shape,extend:{morphArray:w.PathArray,array:function(){return this._array||(this._array=new w.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new w.PathArray(e))},clear:function(){return delete this._array,this},move:function(n,t){return this.attr("d",this.array().move(n,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},size:function(n,t){var e=o(this,n,t);return this.attr("d",this.array().size(e.width,e.height))},width:function(e){return null==e?this.bbox().width:this.size(e,this.bbox().height)},height:function(e){return null==e?this.bbox().height:this.size(this.bbox().width,e)}},construct:{path:function(e){return this.put(new w.Path).plot(e||new w.PathArray)}}}),w.Image=w.invent({create:"image",inherit:w.Shape,extend:{load:function(a){if(!a)return this;var e=this,i=new E.Image;return w.on(i,"load",function(){w.off(i);var n=e.parent(w.Pattern);null!==n&&(0==e.width()&&0==e.height()&&e.size(i.width,i.height),n&&0==n.width()&&0==n.height()&&n.size(e.width(),e.height()),"function"==typeof e._loaded&&e._loaded.call(e,{width:i.width,height:i.height,ratio:i.width/i.height,url:a}))}),w.on(i,"error",function(n){w.off(i),"function"==typeof e._error&&e._error.call(e,n)}),this.attr("href",i.src=this.src=a,w.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(n,t,e){return this.put(new w.Image).load(n).size(t||0,e||t||0)}}}),w.Text=w.invent({create:function(){this.constructor.call(this,w.create("text")),this.dom.leading=new w.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",w.defaults.attrs["font-family"])},inherit:w.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},y:function(n){var t=this.attr("y"),e="number"==typeof t?t-this.bbox().y:0;return null==n?"number"==typeof t?t-e:t:this.attr("y","number"==typeof n.valueOf()?n+e:n)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)},text:function(a){if(void 0===a){for(var a="",o=this.node.childNodes,e=0,s=o.length;e<s;++e)0!=e&&3!=o[e].nodeType&&1==w.adopt(o[e]).dom.newLined&&(a+="\n"),a+=o[e].textContent;return a}if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else{a=a.split("\n");for(var e=0,n=a.length;e<n;e++)this.tspan(a[e]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new w.Number(e),this.rebuild())},lines:function(){var n=(this.textPath&&this.textPath()||this).node,t=w.utils.map(w.utils.filterSVGElements(n.childNodes),function(e){return w.adopt(e)});return new w.Set(t)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var t=this,e=0,r=this.dom.leading*new w.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?e+=r:(this.attr("dy",r+e),e=0))}),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new w.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new w.Text).text(e)},plain:function(e){return this.put(new w.Text).plain(e)}}}),w.Tspan=w.invent({create:"tspan",inherit:w.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(w.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),w.extend(w.Text,w.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(_.createTextNode(e)),this},tspan:function(n){var t=(this.textPath&&this.textPath()||this).node,e=new w.Tspan;return!1===this._build&&this.clear(),t.appendChild(e.node),e.text(n)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),w.TextPath=w.invent({create:"textPath",inherit:w.Parent,parent:w.Text,construct:{morphArray:w.PathArray,path:function(n){for(var t=new w.TextPath,e=this.doc().defs().path(n);this.node.hasChildNodes();)t.node.appendChild(this.node.firstChild);return this.node.appendChild(t.node),t.attr("href","#"+e,w.xlink),this},array:function(){var e=this.track();return e?e.array():null},plot:function(n){var t=this.track(),e=null;return t&&(e=t.plot(n)),null==n?e:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return w.adopt(this.node.firstChild)}}}),w.Nested=w.invent({create:function(){this.constructor.call(this,w.create("svg")),this.style("overflow","visible")},inherit:w.Container,construct:{nested:function(){return this.put(new w.Nested)}}}),w.A=w.invent({create:"a",inherit:w.Container,extend:{to:function(e){return this.attr("href",e,w.xlink)},show:function(e){return this.attr("show",e,w.xlink)},target:function(e){return this.attr("target",e)}},construct:{link:function(e){return this.put(new w.A).to(e)}}}),w.extend(w.Element,{linkTo:function(n){var t=new w.A;return"function"==typeof n?n.call(t,t):t.to(n),this.parent().put(t).put(this)}}),w.Marker=w.invent({create:"marker",inherit:w.Container,extend:{width:function(e){return this.attr("markerWidth",e)},height:function(e){return this.attr("markerHeight",e)},ref:function(n,t){return this.attr("refX",n).attr("refY",t)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(n,t,e){return this.defs().marker(n,t,e)}}}),w.extend(w.Defs,{marker:function(n,t,e){return this.put(new w.Marker).size(n,t).ref(n/2,t/2).viewbox(0,0,n,t).attr("orient","auto").update(e)}}),w.extend(w.Line,w.Polyline,w.Polygon,w.Path,{marker:function(a,o,e,i){var n=["marker"];return"all"!=a&&n.push(a),n=n.join("-"),a=arguments[1]instanceof w.Marker?arguments[1]:this.doc().marker(o,e,i),this.attr(n,a)}});var P={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(n,t){return"color"==t?n:n+"-"+t}};["fill","stroke"].forEach(function(n){var t,a={};a[n]=function(e){if(void 0===e)return this;if("string"==typeof e||w.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(n,e);else for(t=P[n].length-1;0<=t;t--)null!=e[P[n][t]]&&this.attr(P.prefix(n,P[n][t]),e[P[n][t]]);return this},w.extend(w.Element,w.FX,a)}),w.extend(w.Element,w.FX,{rotate:function(n,t,e){return this.transform({rotation:n,cx:t,cy:e})},skew:function(a,t,e,i){return 1==arguments.length||3==arguments.length?this.transform({skew:a,cx:t,cy:e}):this.transform({skewX:a,skewY:t,cx:e,cy:i})},scale:function(a,t,e,i){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:t,cy:e}):this.transform({scaleX:a,scaleY:t,cx:e,cy:i})},translate:function(n,t){return this.transform({x:n,y:t})},flip:function(n,t){return t="number"==typeof n?n:t,this.transform({flip:n||"both",offset:t})},matrix:function(e){return this.attr("transform",new w.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new w.Number(e).plus(this instanceof w.FX?0:this.x()),!0)},dy:function(e){return this.y(new w.Number(e).plus(this instanceof w.FX?0:this.y()),!0)},dmove:function(n,t){return this.dx(n).dy(t)}}),w.extend(w.Rect,w.Ellipse,w.Circle,w.Gradient,w.FX,{radius:function(n,t){var e=(this._target||this).type;return"radial"==e||"circle"==e?this.attr("r",new w.Number(n)):this.rx(n).ry(null==t?n:t)}}),w.extend(w.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),w.extend(w.Parent,w.Text,w.Tspan,w.FX,{font:function(n,t){if("object"==typeof n)for(t in n)this.font(t,n[t]);return"leading"==n?this.leading(t):"anchor"==n?this.attr("text-anchor",t):"size"==n||"family"==n||"weight"==n||"stretch"==n||"variant"==n||"style"==n?this.attr("font-"+n,t):this.attr(n,t)}}),w.Set=w.invent({create:function(e){e instanceof w.Set?this.members=e.members.slice():Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){var n,a,r=[].slice.call(arguments);for(n=0,a=r.length;n<a;n++)this.members.push(r[n]);return this},remove:function(n){var t=this.index(n);return-1<t&&this.members.splice(t,1),this},each:function(n){for(var t=0,a=this.members.length;t<a;t++)n.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return 0<=this.index(e)},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new w.RBox;var e=this.members[0].rbox(this.members[0].doc());return this.each(function(){e=e.merge(this.rbox(this.doc()))}),e}},construct:{set:function(e){return new w.Set(e)}}}),w.FX.Set=w.invent({create:function(e){this.set=e}}),w.Set.inherit=function(){var n,a=[];for(var n in w.Shape.prototype)"function"==typeof w.Shape.prototype[n]&&"function"!=typeof w.Set.prototype[n]&&a.push(n);for(var n in a.forEach(function(n){w.Set.prototype[n]=function(){for(var t=0,a=this.members.length;t<a;t++)this.members[t]&&"function"==typeof this.members[t][n]&&this.members[t][n].apply(this.members[t],arguments);return"animate"==n?this.fx||(this.fx=new w.FX.Set(this)):this}}),a=[],w.FX.prototype)"function"==typeof w.FX.prototype[n]&&"function"!=typeof w.FX.Set.prototype[n]&&a.push(n);a.forEach(function(n){w.FX.Set.prototype[n]=function(){for(var t=0,a=this.set.members.length;t<a;t++)this.set.members[t].fx[n].apply(this.set.members[t].fx,arguments);return this}})},w.extend(w.Element,{data:function(n,t,a){if("object"==typeof n)for(t in n)this.data(t,n[t]);else if(2>arguments.length)try{return JSON.parse(this.attr("data-"+n))}catch(t){return this.attr("data-"+n)}else this.attr("data-"+n,null===t?null:!0===a||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),w.extend(w.Element,{remember:function(n,t){if("object"==typeof arguments[0])for(var t in n)this.remember(t,n[t]);else{if(1==arguments.length)return this.memory()[n];this.memory()[n]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;0<=e;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),w.get=function(e){var t=_.getElementById(m(e)||e);return w.adopt(t)},w.select=function(e,t){return new w.Set(w.utils.map((t||_).querySelectorAll(e),function(e){return w.adopt(e)}))},w.extend(w.Parent,{select:function(e){return w.select(e,this.node)}});var M=["a","b","c","d","e","f"];if("function"!=typeof E.CustomEvent){var k=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=_.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a};k.prototype=E.Event.prototype,w.CustomEvent=k}else w.CustomEvent=E.CustomEvent;return function(a){for(var e=0,t=["moz","webkit"],n=0;n<t.length&&!E.requestAnimationFrame;++n)a.requestAnimationFrame=a[t[n]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[t[n]+"CancelAnimationFrame"]||a[t[n]+"CancelRequestAnimationFrame"];a.requestAnimationFrame=a.requestAnimationFrame||function(i){var t=new Date().getTime(),n=g(0,16-(t-e)),r=a.setTimeout(function(){i(t+n)},n);return e=t+n,r},a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(E),w}),String.prototype.id=function(){if(this.includes("SVGid"))var e=this.replace("SVGid","").split("#"),t=atob(e[0])+(e[1]?"#"+e[1]:"");return t};